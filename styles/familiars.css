/* styles/familiars.css — Familiar sprite animations and effects */

/* ─── Sprite Sheet Cycling (4 frames, steps) ────────────────────────────────── */
@keyframes fam-sprite-walk {
    0%   { background-position: 0% 0; }
    100% { background-position: 100% 0; }
}

.familiar-sprite {
    background-repeat: no-repeat;
    animation: fam-sprite-walk 0.6s steps(4, end) infinite;
    image-rendering: pixelated;
    border-radius: 4px;
    overflow: hidden;
}

/* ─── Container Float/Bob (applied on top of sprite cycling) ─────────────────── */
@keyframes fam-bob {
    0%, 100% { transform: translateY(0); }
    50%      { transform: translateY(-4px); }
}

@keyframes fam-bounce {
    0%, 100% { transform: translateY(0) scaleY(1); }
    40%      { transform: translateY(-8px) scaleY(1.05); }
    60%      { transform: translateY(-6px) scaleY(1.02); }
}

@keyframes fam-stomp {
    0%, 100% { transform: translateY(0) scaleX(1); }
    30%      { transform: translateY(-5px) scaleX(0.95); }
    60%      { transform: translateY(2px) scaleX(1.06); }
    70%      { transform: translateY(0) scaleX(1); }
}

@keyframes fam-flicker {
    0%, 100% { opacity: 1; transform: scale(1); }
    15%      { opacity: 0.7; transform: scale(0.97); }
    30%      { opacity: 1; transform: scale(1.02); }
    50%      { opacity: 0.85; transform: scale(0.99); }
    70%      { opacity: 1; transform: scale(1); }
}

@keyframes fam-spin-sparkle {
    0%   { transform: rotate(0deg) scale(1); }
    25%  { transform: rotate(5deg) scale(1.05); }
    50%  { transform: rotate(0deg) scale(1); }
    75%  { transform: rotate(-5deg) scale(1.05); }
    100% { transform: rotate(0deg) scale(1); }
}

/* ─── Per-type animation classes ─────────────────────────────────────────────── */
.fam-anim-fast-bounce {
    animation: fam-bounce 0.5s ease-in-out infinite;
}

.fam-anim-slow-float {
    animation: fam-bob 2.5s ease-in-out infinite;
}

.fam-anim-stomp {
    animation: fam-stomp 0.8s ease-in-out infinite;
}

.fam-anim-flicker {
    animation: fam-flicker 1.6s ease-in-out infinite;
}

.fam-anim-spin-sparkle {
    animation: fam-spin-sparkle 1.2s ease-in-out infinite;
}

/* ─── Egg wobble ─────────────────────────────────────────────────────────────── */
@keyframes fam-egg-wobble {
    0%, 100% { transform: rotate(0deg) scale(1); }
    15%      { transform: rotate(-6deg) scale(1.04); }
    30%      { transform: rotate(6deg) scale(1.04); }
    45%      { transform: rotate(-4deg) scale(1.02); }
    60%      { transform: rotate(4deg) scale(1.02); }
    75%      { transform: rotate(-2deg) scale(1.01); }
}

.familiar-egg-wobble {
    animation: fam-egg-wobble 2.2s ease-in-out infinite;
}

/* ─── Container base ─────────────────────────────────────────────────────────── */
.familiar-container {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    flex-shrink: 0;
}

.familiar-container:hover {
    filter: brightness(1.15);
}

/* ─── Shimmer placeholder (while generating) ─────────────────────────────────── */
@keyframes fam-shimmer {
    0%   { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.familiar-shimmer {
    background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
    background-size: 200% 100%;
    animation: fam-shimmer 1.5s infinite linear;
    border-radius: 50%;
}

/* ─── Familiar in stats overlay ─────────────────────────────────────────────── */
.familiar-stats-overlay .familiar-container {
    filter: drop-shadow(0 0 12px rgba(255,255,255,0.3));
}

/* ─── Small familiar chip on leaderboard cards ─────────────────────────────── */
.familiar-chip {
    position: absolute;
    bottom: -4px;
    right: -4px;
    z-index: 10;
}

/* Ensure familiar sits visually beside avatar without layout shift */
.avatar-familiar-pair {
    position: relative;
    display: inline-block;
}
